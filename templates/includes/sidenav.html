{% load static %}
<link rel="stylesheet" href="{% static 'css/estilos/unicos.css' %}">

<aside class="sidenav">
    
    <div class="menu-icon">
        <img src="/static/img/Logo inv maqman.jpg" alt="Logo de Inver-Maq">
        <p>Inver-Maq</p>
    </div>
    <ul class="sidenav__list-perfil">
        <a href="{% url 'reportesMaqman:perfil' %}">
            <li class="sidenav__list-item" style="position: relative;">
                
                {% if user.p_id_persona.imagen %}
                    <img class="sidenav__icon" src="{{ user.p_id_persona.imagen.url }}" alt="foto de perfil">
                {% else %}
                    <img class="sidenav__icon" src="{% static 'img/usuario.png' %}" alt="foto de perfil">
                {% endif %}
                    
                <p class="fs-14px" style="margin: 0px;">{{ user.r_id_rol.rol }} - {{ nombres.0 }}</p>
            </li>
        </a>
    </ul>

    <ul class="sidenav__list">
        <a href="{% url 'reportesMaqman:vistaPrincipal' %}">
            <li class="sidenav__list-item">
                <span class="sidenav__icon">
                    <svg preserveAspectRatio="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z"></path>
                    </svg>
                </span>    
                <p class="fs-14px" style="margin: 0px;">Página Principal</p>
            </li>
        </a>
        
        {% if user.r_id_rol.rol == "Operador" or user.r_id_rol.rol == "Asistente" or user.r_id_rol.rol == "Jefe" %}
            <button class="accordion sidenav__list-item">
                <span class="sidenav__icon">
                    <svg preserveAspectRatio="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1zm17-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 9h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1zm-4 4h-4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1zm4-8h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z"></path>
                    </svg>
                </span>
                Reportes
            </button>
            <div class="panel">

                <a class="sidenav__list-item" href="{% url 'reportesMaqman:generarReport' %}">
                    Generar reporte
                </a>

                
                <a class="sidenav__list-item" 
                {% if user.r_id_rol.rol == "Operador" %}
                href="{% url 'reportesMaqman:reportesInvalidos' %}">
                    Mis reportes
                {% else %}
                href="{% url 'reportesMaqman:verReportes' %}">
                    Ver reportes
                {% endif %}
                </a>

            {% if user.r_id_rol.rol == "Asistente" or user.r_id_rol.rol == "Jefe" %}
                <a class="sidenav__list-item" href="{% url 'reportesMaqman:descargarReport' %}">
                    Descargar reportes
                </a>

            </div>
            <a href="{% url 'reportesMaqman:gestionUsuario' %}">
                <li class="sidenav__list-item">
                    <span class="sidenav__icon">
                        <svg preserveAspectRatio="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V18c0 .55.45 1 1 1h9c.55 0 1-.45 1-1v-1.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V18c0 .55.45 1 1 1h6v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z"></path>
                        </svg>
                    </span>    
                    <p class="fs-14px" style="margin: 0px;">Usuarios</p>
                </li>
            </a>
            <button class="accordion sidenav__list-item">
                <span class="sidenav__icon">
                    <svg preserveAspectRatio="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-.4 4.25l-6.54 4.09c-.65.41-1.47.41-2.12 0L4.4 8.25c-.25-.16-.4-.43-.4-.72 0-.67.73-1.07 1.3-.72L12 11l6.7-4.19c.57-.35 1.3.05 1.3.72 0 .29-.15.56-.4.72z"></path>
                    </svg>
                </span>
                Correos
            </button>
            <div class="panel">

                <a class="sidenav__list-item" href="{% url 'reportesMaqman:gestionContactos' %}">
                    Gestión de contactos
                </a>

                <a class="sidenav__list-item" href="{% url 'reportesMaqman:programarCorreo' %}">
                    Programar correos
                </a>

                <a class="sidenav__list-item" href="{% url 'reportesMaqman:correosProgramados' %}">
                    Correos programados
                </a>

            </div>
            {% endif %}
        {% endif %}
        
        {% if user.r_id_rol.rol == "Mecánico" or user.r_id_rol.rol == "Asistente" or user.r_id_rol.rol == "Jefe" %}
            <button class="accordion sidenav__list-item">
                <span class="sidenav__icon">
                    <img class="sidenav__icon" style="margin: -5px 0 0 -5px;" src="{% static 'img/mantencion.png' %}" alt="Mantencion-img">
                </span>
                Mantenciones
            </button>
            <div class="panel">

                <a class="sidenav__list-item" href="{% url 'reportesMaqman:generarMantencion' %}">
                    Generar mantención
                </a>
                <a class="sidenav__list-item" 
                {% if user.r_id_rol.rol == "Mecánico" %}
                href="{% url 'reportesMaqman:mantencionesInvalidas' %}">
                {% else %}
                href="{% url 'reportesMaqman:verMantenciones' %}">
                {% endif %}
                    Ver mantenciones
                </a>

                <!-- {% if user.r_id_rol.rol == "Asistente" or user.r_id_rol.rol == "Jefe" %}
                <a class="sidenav__list-item" href="{% url 'reportesMaqman:descargarMantencion' %}">
                    Descargar certificados
                </a>
                {% endif %} -->
            </div>
        {% endif %}
            
        </ul>
        <div class="sidenav__list-logout">
            <a href="{% url 'reportesMaqman:logout' %}">
                <li class="sidenav__list-item">
                    <span class="sidenav__icon">
                        <svg preserveAspectRatio="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.89 8.7L12 10.59 10.11 8.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 8.7 13.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l1.89 1.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l1.89-1.89c.39-.39.39-1.02 0-1.41-.39-.38-1.03-.38-1.41 0zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path>
                        </svg>
                    </span>
                    <p class="fs-14px" style="margin: 0px;">Cerrar Sesión</p>
                </li>
            </a>
        </div>
</aside>
<!-- <a href="{% url 'reportesMaqman:generarReport' %}">
    <li class="sidenav__list-item">
        <span class="sidenav__icon">
            <svg preserveAspectRatio="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1zm17-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 9h-3v3c0 .55-.45 1-1 1s-1-.45-1-1v-3h-3c-.55 0-1-.45-1-1s.45-1 1-1h3V6c0-.55.45-1 1-1s1 .45 1 1v3h3c.55 0 1 .45 1 1s-.45 1-1 1z"></path>
            </svg>
        </span>
        <p class="fs-14px" style="margin: 0px;">Generar Report.</p>
    </li>
</a>

<a href="{% url 'reportesMaqman:verReportes' %}">
    <li class="sidenav__list-item">
        <span class="sidenav__icon">
            <svg preserveAspectRatio="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1zm17-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 9h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1zm-4 4h-4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1zm4-8h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z"></path>
            </svg>
        </span>
        {% if user.r_id_rol.id_rol == 1 %}
        <p class="fs-14px" style="margin: 0px;">Mis Report.</p>
        {% else %}
        <p class="fs-14px" style="margin: 0px;">Ver Report.</p>
        {% endif %}
    </li>
</a> -->
<!-- <a href="{% url 'reportesMaqman:descargarReport' %}">
    <li class="sidenav__list-item">
        <span class="sidenav__icon">
            <svg preserveAspectRatio="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.59 9H15V4c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v5H7.41c-.89 0-1.34 1.08-.71 1.71l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.63-.63.19-1.71-.7-1.71zM5 19c0 .55.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1z"></path>
            </svg>
        </span>    
        <p class="fs-14px" style="margin: 0px;">Descargar Report.</p>
    </li>
</a> -->
<script>
    var acc = document.querySelectorAll(".accordion");
    var active = null;

    acc.forEach((item, i) => {
    item.addEventListener("click", function () {
        this.classList.toggle("active");
        var panel = this.nextElementSibling;
        
        if(active) {
            active.style.maxHeight = null;
        }
        
        if(panel !== active) {
            panel.style.maxHeight = panel.scrollHeight + "px";
            active = panel
        } else {
            active = null
        }

        
    });
    }); 
</script>